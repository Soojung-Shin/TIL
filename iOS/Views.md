# Views

MVC에서의 뷰는 컨트롤러의 수많은 쫄병들을 의미한다. 뷰는 수많은 뷰(iOS의 클래스인 UIView의 서브클래스)들을 거느리고 있다.

<br />



### 뷰는 뭘까? UIView의 서브 클래스는 뭘까?

좌표계를 정의하는 화면의 사각형을 의미한다. 이 좌표계는 드로잉할 때도 사용되고, 손가락을 이용한 멀티 터치를 할 때도 사용된다.

뷰는 계층 구조(Hierarchical)로 되어있기 때문에 어떤 직사각형 안에 또 다른 직사각형이 있는 식이다. 뷰 안에 뷰가 있고, 그 뷰 안에 또 뷰가 있고... 예를 들어 검정색 최상위 뷰 안에 스택뷰가 있고, 스택 뷰 안에는 또 다른 스택뷰가 있고, 그 안에는 UI 버튼들이 있을 수 있다.

<br />

```swift
var superview: UIView?
//해당 뷰의 superView, 즉 어느 뷰에 포함되어있는지를 알려준다.
//현재 화면에 없을 수도 있으니 당연히 옵셔널 UIView일 것이다. 만약 슈퍼 뷰가 없다면 따로 추가할 수도 있다.

var subviews: [UIView]
//해당 뷰의 서브 뷰를 가져온다.
```

창을 여러개 띄울 수 있는 Mac과는 다르기에 iOS에서는 제일 꼭대기에 UIWindow가 있다. UIWindow는 아마 외부 화면에 앱을 띄울 때 말고는 사용할 일이 없을 것...........UIWindow는 UIView의 서브 클래스다. (반대가 아닌 것.....알아둬)

<br />



### subview 추가, 삭제

뷰의 계층 구조를 구현할 때는 Xcode라는 인터페이스 빌더를 이용할 수도 있고(드래그, 클릭으로 뷰 안의 뷰 등을 구현), 코드로도 구현할 수 있다.

```swift
func addSubview(_ view: UIView)
//뷰를 추가하도록 슈퍼뷰!!!에게 보내는 메세지

func removeFromSuperview()
//만약 뷰 계층 구조에서 뷰를 빼내고 싶다면, 해당 메세지를 빼내고 싶은 뷰에게 보내야 한다.
//슈퍼뷰에게 보내는 것이 아니다....!!!!없앨 뷰에게 보내야 함!!!
```

<br />



### 계층 구조는 어디에서 시작할까? 최상위에는 뭐가 있을까?

```swift
var view: UIView
//UIViewController에는 아주 중요한 변수인 view가 있다. 이 view는 최상위 뷰를 가리킨다.
//인터페이스 빌더에서는 자동으로 설정되므로 여기부터 시작하면 된다. 계층구조가 시작되는 부분이다. 
//UIViewController에서 UIView 타입인 view는 계층 구조에 직접 접근하기 위해서 매우매우 중요하다!
```

물론 뷰의 계층 구조를 Outlet을 이용하면 언제 어디서나 접근할 수 있다. 만약 스택뷰에서 아울렛을 만들면 스택뷰를 볼 수 있는 것은 물론 원한다면 서브 뷰를 볼 수도 있다. 반드시 꼭대기에서 시작해야하는 것은 아니다. 언제 어디서나 아울렛을 이용하면 원하는 뷰를 볼 수 있다.

<br />

<br />



## 뷰의 초기화

보통은 초기화할 때 최대한 다른 방법을 써서 init은 최대한 피하려고 한다. 하지만 피할 수 없는 경우에~!! 뷰에는 두 종류의 이니셜라이저가 있다.

```swift
init(frame: CGRect)
//코드에서 뷰를 만드는 용도
init(coder: NSCoder)
//인터페이스 빌더에서 자유롭게 편집하고, 앱이 실행될 때 이 init이 사용된다.
//NSCoder라는 코더는 인터페이스 빌더를 잠시 중단시켰다가 앱이 실행되면 다시 살려내는 메커니즘을 갖고 있는 프로토콜이다.
```

뷰의 initializer가 필요하다면 위 두가지 모두를 구현해야한다~!!! 왜냐하면 frame을 사용하는 init은 지정된 이니셜라이저라서 코드에서 뷰를 생성한 뒤 코드를 실행하고 싶다면 필요하다. 그리고 coder를 사용하는 init은 UIView가 NSCoder 프로토콜을 구현하는 데 필요하다. 프로토콜을 쓰려면 안에 init이 있기 때문에 둘 다 구현해야 한다.

<br />

```swift
func setup() {...}

override init(frame: CGRect) {
  super.init(frame: frame)
  setup()
}

required init?(coder aDecoder: NSCoder) {
  super.init(coder: aDecoder)
  setup()
}
```

공통 함수를 만들어서 두 경우 모두 호출할 수도 있다. 하지만 간단하진 않다.........왜냐면 변수를 초기화하려고 이 메커니즘을 쓰면 `super.init`을 호출하기 전에 변수를 먼저 초기화해야한다. 그래서 이 변수들은 init 안에서 초기화를 마쳐야한다. 그럼 아마 코드가 겹칠수도 있겠지. 하지만 완전히 겹치지는 않는다는 것을 명심해...

<br />



### UIView를 초기화하는 또 다른 방법

```swift
override func awakeFromNib() {
  ...
}
```

인터페이스 빌더가 다시 살아났을 때 UIButton, UIViewController.... 등등 인터페이스 빌더 파일에서 나온 모든 오브젝트에게 보내진다. 

여기에서 초기화되는 것은 인터페이스 빌더 파일에서 나온 뷰 뿐!! 예를 들어 `init(frame: CGRect)`에서 뷰가 만들어졌다면 이 함수는 호출되지 않는다. 오직 인터페이스 빌더의 중단이 해제되었을 때만 호출된다.

Nib은 인터페이스 빌더 파일의 옛날 이름...Ib, Nib가 인터페이스 빌더를 뜻한다.

